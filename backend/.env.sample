# LabelSlayer Backend â€” .env.sample
# Copy to .dev.vars for local development or map into wrangler.toml [vars]
# Note: Secrets must NOT be committed; set via Wrangler secrets as documented below.

# -------------------------
# Service identity/version
# -------------------------
# Semver or commit-based API version string surfaced by [/health]
API_VERSION="0.1.0"

# Database schema version expected by the worker (aligned with migrations/)
SCHEMA_VERSION="0001"

# -------------------------
# Environment selection
# -------------------------
# One of: local | dev | production
APP_ENV="local"

# -------------------------
# API and CORS
# -------------------------
# Public base URL for the backend API. For local dev, Wrangler runs at http://127.0.0.1:8787 by default.
# Production recommendation: Use your Cloudflare Worker route, e.g. https://api.labelslayer.example.com
API_BASE_URL="http://127.0.0.1:8787"

# Allowed origin(s) for CORS; use "*" only in local/dev. For production set to your mobile/web origins.
# Example: "https://app.example.com" or "https://app.example.com,https://m.example.com"
CORS_ALLOW_ORIGIN="*"

# -------------------------
# Performance and limits
# -------------------------
# Per-minute request cap used by in-memory dev limiter (replace with DO/KV in prod)
RATE_LIMIT_MAX_MINUTE="120"

# Fraction (0.0 - 1.0) of requests to sample for additional logging/telemetry
LOG_SAMPLE_RATE="0.1"

# Signed URL TTL for image uploads in seconds
IMAGE_URL_TTL_SECONDS="900"

# -------------------------
# Jobs/Queues
# -------------------------
# Name of the analysis queue (must match wrangler.toml bindings)
ANALYSIS_QUEUE_NAME="analysis-jobs"

# -------------------------
# Vector search
# -------------------------
# Vector embedding dimension (1536 for text-embedding-3-small default)
VECTORIZE_DIMENSION="1536"

# Vector index binding name (matches wrangler.toml [[vectorize]].binding)
VECTORIZE_INDEX="VECT_INDEX"

# -------------------------
# Storage
# -------------------------
# R2 bucket binding name (matches wrangler.toml [[r2_buckets]].binding)
R2_BUCKET="R2_BUCKET"

# -------------------------
# Database
# -------------------------
# D1 database binding name (matches wrangler.toml [[d1_databases]].binding)
D1_DB_NAME="LABELSLAYER_D1"

# -------------------------
# MCP endpoints (optional)
# -------------------------
# Remote MCP providers. Leave empty to use mock/stub behavior in dev.
MCP_CONTEXT7_ENDPOINT=""
MCP_SEQUENTIAL_ENDPOINT=""

# -------------------------
# OpenAI configuration
# -------------------------
# Alternate base URL for OpenAI-compatible APIs; default is official
OPENAI_BASE_URL="https://api.openai.com/v1"

# -------------------------
# Secrets (do NOT commit real values)
# -------------------------
# Set via Wrangler secrets (see docs below)
# OPENAI_API_KEY=""
# ETAG_SALT=""

# Wrangler secrets commands (run in ./backend):
#   npx wrangler secret put OPENAI_API_KEY
#   npx wrangler secret put ETAG_SALT